
> eventia-backend@1.0.0 test
> jest --coverage src/__tests__/integration/eventRoutes.test.ts

  console.log
    Loading environment from .env.test

      at Object.<anonymous> (src/config/index.ts:18:11)

2025-11-23 02:03:09 [32minfo[39m: Registered route: /upi-settings
2025-11-23 02:03:09 [32minfo[39m: Registered route: /events
2025-11-23 02:03:09 [32minfo[39m: Registered route: /users
2025-11-23 02:03:09 [32minfo[39m: Registered route: /upi
2025-11-23 02:03:09 [32minfo[39m: Registered route: /auth
2025-11-23 02:03:09 [32minfo[39m: Registered route: /users
2025-11-23 02:03:09 [32minfo[39m: Registered route: /events
2025-11-23 02:03:09 [32minfo[39m: Registered route: /bookings
2025-11-23 02:03:09 [32minfo[39m: Registered route: /payments
2025-11-23 02:03:09 [32minfo[39m: Registered route: /discounts
2025-11-23 02:03:09 [32minfo[39m: Registered route: /seats
2025-11-23 02:03:09 [32minfo[39m: Registered route: /seat-locks
2025-11-23 02:03:09 [32minfo[39m: Registered route: /ticket-categories
2025-11-23 02:03:09 [32minfo[39m: Registered route: /tickets
2025-11-23 02:03:09 [32minfo[39m: Registered route: /payment-initialize
2025-11-23 02:03:09 [32minfo[39m: Registered route: /verify-utr
2025-11-23 02:03:09 [32minfo[39m: Registered route: /health
2025-11-23 02:03:09 [32minfo[39m: Registered route: /state-sync
2025-11-23 02:03:09 [32minfo[39m: DataLoader middleware initialized for optimized queries
2025-11-23 02:03:09 [32minfo[39m: WebSocket server initialized
2025-11-23 02:03:09 [32minfo[39m: WebSocket service initialized
2025-11-23 02:03:09 [32minfo[39m: Background jobs initialized
2025-11-23 02:03:09 [32minfo[39m: prisma:query
2025-11-23 02:03:09 [32minfo[39m: prisma:query
2025-11-23 02:03:09 [32mhttp[39m: [0mGET /api/v1/events [32m200[0m 20.309 ms - 604[0m
2025-11-23 02:03:09 [32minfo[39m: GET /events response body:
2025-11-23 02:03:09 [32minfo[39m: prisma:query
2025-11-23 02:03:09 [32minfo[39m: prisma:query
2025-11-23 02:03:09 [32mhttp[39m: [0mGET /api/v1/events [32m200[0m 5.173 ms - 604[0m
2025-11-23 02:03:09 [31merror[39m: [POST] /api/v1/events - Validation failed
2025-11-23 02:03:09 [32mhttp[39m: [0mPOST /api/v1/events [33m400[0m 23.914 ms - 300[0m
2025-11-23 02:03:09 [32minfo[39m: POST /events failed: {
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": [
      {
        "path": "title",
        "message": "Required",
        "code": "invalid_type"
      },
      {
        "path": "location",
        "message": "Required",
        "code": "invalid_type"
      },
      {
        "path": "startDate",
        "message": "Invalid input",
        "code": "invalid_union"
      }
    ]
  },
  "data": null
}
2025-11-23 02:03:09 [34mdebug[39m: Authentication failed: No token provided
2025-11-23 02:03:09 [31merror[39m: [POST] /api/v1/events - Authentication required
2025-11-23 02:03:09 [32mhttp[39m: [0mPOST /api/v1/events [33m401[0m 12.019 ms - 102[0m
FAIL src/__tests__/integration/eventRoutes.test.ts (11.247 s)
  Event Routes
    GET /api/v1/events
      âœ“ should return a list of published events (64 ms)
      âœ“ should return all events for authenticated organizers (15 ms)
    POST /api/v1/events
      âœ• should create a new event when authenticated (34 ms)
      âœ“ should return 401 when not authenticated (19 ms)

  â— Event Routes â€º POST /api/v1/events â€º should create a new event when authenticated

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

      137 |       }
      138 |
    > 139 |       expect(response.status).toBe(201);
          |                               ^
      140 |       expect(response.body.success).toBe(true);
      141 |       expect(response.body.data.title).toBe(newEvent.title);
      142 |

      at Object.<anonymous> (src/__tests__/integration/eventRoutes.test.ts:139:31)

Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/scripts/release-expired-locks.ts
ERROR: [96msrc/scripts/release-expired-locks.ts[0m:[93m15[0m:[93m55[0m - [91merror[0m[90m TS2339: [0mProperty 'releaseExpiredSeatLocks' does not exist on type 'typeof import("/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/payment.controller")'.

[7m15[0m         const releasedCount = await paymentController.releaseExpiredSeatLocks();
[7m  [0m [91m                                                      ~~~~~~~~~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/repositories/paymentRepository.ts
ERROR: [96msrc/repositories/paymentRepository.ts[0m:[93m45[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; } | null' is not assignable to type 'BookingPayment | null'.
  Type '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
    Types of property 'utrNumber' are incompatible.
      Type 'string | null' is not assignable to type 'string | undefined'.
        Type 'null' is not assignable to type 'string | undefined'.

[7m45[0m       return payment;
[7m  [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m61[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; } | null' is not assignable to type 'BookingPayment | null'.
  Type '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
    Types of property 'utrNumber' are incompatible.
      Type 'string | null' is not assignable to type 'string | undefined'.
        Type 'null' is not assignable to type 'string | undefined'.

[7m61[0m       return payment;
[7m  [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m77[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; } | null' is not assignable to type 'BookingPayment | null'.
  Type '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
    Types of property 'utrNumber' are incompatible.
      Type 'string | null' is not assignable to type 'string | undefined'.
        Type 'null' is not assignable to type 'string | undefined'.

[7m77[0m       return payment;
[7m  [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m93[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
  Types of property 'utrNumber' are incompatible.
    Type 'string | null' is not assignable to type 'string | undefined'.
      Type 'null' is not assignable to type 'string | undefined'.

[7m93[0m       return payment;
[7m  [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m110[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
  Types of property 'utrNumber' are incompatible.
    Type 'string | null' is not assignable to type 'string | undefined'.
      Type 'null' is not assignable to type 'string | undefined'.

[7m110[0m       return payment;
[7m   [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m132[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
  Types of property 'utrNumber' are incompatible.
    Type 'string | null' is not assignable to type 'string | undefined'.
      Type 'null' is not assignable to type 'string | undefined'.

[7m132[0m       return payment;
[7m   [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m153[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to type 'BookingPayment'.
  Types of property 'utrNumber' are incompatible.
    Type 'string | null' is not assignable to type 'string | undefined'.
      Type 'null' is not assignable to type 'string | undefined'.

[7m153[0m       return payment;
[7m   [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m201[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; upivpa: string; discountamount: Decimal; isactive: boolean; created_at: Date; updated_at: Date; } | null' is not assignable to type 'UpiSetting | null'.
  Type '{ id: string; upivpa: string; discountamount: Decimal; isactive: boolean; created_at: Date; updated_at: Date; }' is not assignable to type 'UpiSetting'.
    Types of property 'discountamount' are incompatible.
      Type 'Decimal' is not assignable to type 'number'.

[7m201[0m       return settings;
[7m   [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m227[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; upivpa: string; discountamount: Decimal; isactive: boolean; created_at: Date; updated_at: Date; }' is not assignable to type 'UpiSetting'.
  Types of property 'discountamount' are incompatible.
    Type 'Decimal' is not assignable to type 'number'.

[7m227[0m       return settings;
[7m   [0m [91m      ~~~~~~[0m
[96msrc/repositories/paymentRepository.ts[0m:[93m247[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ id: string; upivpa: string; discountamount: Decimal; isactive: boolean; created_at: Date; updated_at: Date; }' is not assignable to type 'UpiSetting'.
  Types of property 'discountamount' are incompatible.
    Type 'Decimal' is not assignable to type 'number'.

[7m247[0m       return settings;
[7m   [0m [91m      ~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/dynamicPricing.controller.ts
ERROR: [96msrc/controllers/dynamicPricing.controller.ts[0m:[93m22[0m:[93m60[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "TIME_BASED" | "DEMAND_BASED" | "INVENTORY_BASED"; name: string; conditions: Record<string, any>; adjustments: Record<string, any>; priority: number; isActive: boolean; eventId?: string | undefined; ticketCategoryId?: string | undefined; }' is not assignable to parameter of type 'PricingRule'.
  Type '{ type: "TIME_BASED" | "DEMAND_BASED" | "INVENTORY_BASED"; name: string; conditions: Record<string, any>; adjustments: Record<string, any>; priority: number; isActive: boolean; eventId?: string | undefined; ticketCategoryId?: string | undefined; }' is missing the following properties from type 'PricingRule': adjustmentType, adjustmentValue

[7m22[0m   const rule = await DynamicPricingService.savePricingRule(validatedData);
[7m  [0m [91m                                                           ~~~~~~~~~~~~~[0m
[96msrc/controllers/dynamicPricing.controller.ts[0m:[93m45[0m:[93m60[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ eventId?: string | undefined; ticketCategoryId?: string | undefined; type?: "TIME_BASED" | "DEMAND_BASED" | "INVENTORY_BASED" | undefined; name?: string | undefined; conditions?: Record<...> | undefined; adjustments?: Record<...> | undefined; priority?: number | undefined; isActive?: boolean | undefined; id: strin...' is not assignable to parameter of type 'PricingRule'.
  Type '{ eventId?: string | undefined; ticketCategoryId?: string | undefined; type?: "TIME_BASED" | "DEMAND_BASED" | "INVENTORY_BASED" | undefined; name?: string | undefined; conditions?: Record<...> | undefined; adjustments?: Record<...> | undefined; priority?: number | undefined; isActive?: boolean | undefined; id: strin...' is missing the following properties from type 'PricingRule': adjustmentType, adjustmentValue

[7m45[0m   const rule = await DynamicPricingService.savePricingRule({
[7m  [0m [91m                                                           ~[0m
[7m46[0m     id: req.params.ruleId,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m47[0m     ...validatedData
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m48[0m   });
[7m  [0m [91m~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/repositories/eventRepository.ts
ERROR: [96msrc/repositories/eventRepository.ts[0m:[93m65[0m:[93m39[0m - [91merror[0m[90m TS2724: [0m'"/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/node_modules/.prisma/client/index".Prisma' has no exported member named 'EventStatusFilter'. Did you mean 'EnumEventStatusFilter'?

[7m65[0m       where.status = status as Prisma.EventStatusFilter<"Event">;
[7m  [0m [91m                                      ~~~~~~~~~~~~~~~~~[0m
[96msrc/repositories/eventRepository.ts[0m:[93m103[0m:[93m5[0m - [91merror[0m[90m TS2322: [0mType '({ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; })[]' is not assignable to type '({ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; } & { ...; })[]'.
  Type '{ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }' is not assignable to type '{ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; } & { ...; }'.
    Type '{ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }' is not assignable to type '{ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; }'.
      Types of property 'organizer' are incompatible.
        Type '{ name: string; id: string; email: string; }' is missing the following properties from type '{ name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }': isDeleted, deletedAt, createdAt, updatedAt, and 4 more.

[7m103[0m     return prisma.event.findMany({
[7m   [0m [91m    ~~~~~~[0m
[96msrc/repositories/eventRepository.ts[0m:[93m132[0m:[93m5[0m - [91merror[0m[90m TS2322: [0mType '({ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }) | null' is not assignable to type '({ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; } & { ...; }) | null'.
  Type '{ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }' is not assignable to type '({ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; } & { ...; }) | null'.
    Type '{ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }' is not assignable to type '{ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; } & { ...; }'.
      Type '{ organizer: { name: string; id: string; email: string; }; categories: { name: string; id: string; createdAt: Date; updatedAt: Date; }[]; _count: { bookings: number; }; } & { id: string; title: string; ... 13 more ...; updatedAt: Date; }' is not assignable to type '{ organizer: { name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }; categories: { ...; }[]; _count: { ...; }; }'.
        Types of property 'organizer' are incompatible.
          Type '{ name: string; id: string; email: string; }' is missing the following properties from type '{ name: string; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; email: string; password: string; role: UserRole; verified: boolean; verificationToken: string | null; }': isDeleted, deletedAt, createdAt, updatedAt, and 4 more.

[7m132[0m     return prisma.event.findUnique({
[7m   [0m [91m    ~~~~~~[0m
[96msrc/repositories/eventRepository.ts[0m:[93m239[0m:[93m39[0m - [91merror[0m[90m TS2724: [0m'"/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/node_modules/.prisma/client/index".Prisma' has no exported member named 'EventStatusFilter'. Did you mean 'EnumEventStatusFilter'?

[7m239[0m       where.status = status as Prisma.EventStatusFilter<"Event">;
[7m   [0m [91m                                      ~~~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/stadium.service.ts
ERROR: [96msrc/services/stadium.service.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"@/services/api/apiUtils"' has no exported member 'getApiUrl'.

[7m3[0m import { getApiUrl, defaultApiClient } from '@/services/api/apiUtils';
[7m [0m [91m         ~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/seatLocking.service.ts
ERROR: [96msrc/services/seatLocking.service.ts[0m:[93m1[0m:[93m8[0m - [91merror[0m[90m TS1192: [0mModule '"/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/cacheService"' has no default export.

[7m1[0m import CacheService from './cacheService';
[7m [0m [91m       ~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/razorpay.service.ts
ERROR: [96msrc/services/razorpay.service.ts[0m:[93m15[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'razorpay' does not exist on type 'AppConfig'.

[7m15[0m         pa: config.razorpay.merchantUpiId, // VPA (UPI ID) of the merchant
[7m  [0m [91m                   ~~~~~~~~[0m
[96msrc/services/razorpay.service.ts[0m:[93m16[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'razorpay' does not exist on type 'AppConfig'.

[7m16[0m         pn: config.razorpay.merchantName,  // Merchant name
[7m  [0m [91m                   ~~~~~~~~[0m
[96msrc/services/razorpay.service.ts[0m:[93m57[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'razorpay' does not exist on type 'AppConfig'.

[7m57[0m             .createHmac('sha256', config.razorpay.webhookSecret)
[7m  [0m [91m                                         ~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/DynamicPricingService.ts
ERROR: [96msrc/services/DynamicPricingService.ts[0m:[93m199[0m:[93m15[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'ticketCategoryId' does not exist in type 'BookingWhereInput'.

[7m199[0m               ticketCategoryId,
[7m   [0m [91m              ~~~~~~~~~~~~~~~~[0m
[96msrc/services/DynamicPricingService.ts[0m:[93m245[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }[]' is not assignable to type 'PricingRule[]'.
  Type '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }' is not assignable to type 'PricingRule'.
    Types of property 'type' are incompatible.
      Type 'string' is not assignable to type '"TIME_BASED" | "INVENTORY_BASED" | "DEMAND_BASED" | "CUSTOM"'.

[7m245[0m       return await prisma.pricingRule.findMany({
[7m   [0m [91m      ~~~~~~[0m
[96msrc/services/DynamicPricingService.ts[0m:[93m292[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }' is not assignable to type 'PricingRule'.
  Types of property 'type' are incompatible.
    Type 'string' is not assignable to type '"TIME_BASED" | "INVENTORY_BASED" | "DEMAND_BASED" | "CUSTOM"'.

[7m292[0m       return await prisma.pricingRule.create({
[7m   [0m [91m      ~~~~~~[0m
[96msrc/services/DynamicPricingService.ts[0m:[93m309[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }' is not assignable to type 'PricingRule'.
  Types of property 'type' are incompatible.
    Type 'string' is not assignable to type '"TIME_BASED" | "INVENTORY_BASED" | "DEMAND_BASED" | "CUSTOM"'.

[7m309[0m       return await prisma.pricingRule.update({
[7m   [0m [91m      ~~~~~~[0m
[96msrc/services/DynamicPricingService.ts[0m:[93m338[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }[]' is not assignable to type 'PricingRule[]'.
  Type '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }' is not assignable to type 'PricingRule'.
    Types of property 'type' are incompatible.
      Type 'string' is not assignable to type '"TIME_BASED" | "INVENTORY_BASED" | "DEMAND_BASED" | "CUSTOM"'.

[7m338[0m       return await prisma.pricingRule.findMany({
[7m   [0m [91m      ~~~~~~[0m
[96msrc/services/DynamicPricingService.ts[0m:[93m355[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; } | null' is not assignable to type 'PricingRule | null'.
  Type '{ name: string; id: string; description: string | null; createdAt: Date; updatedAt: Date; eventId: string | null; type: string; isActive: boolean; ticketCategoryId: string | null; ... 4 more ...; isGlobal: boolean; }' is not assignable to type 'PricingRule'.
    Types of property 'type' are incompatible.
      Type 'string' is not assignable to type '"TIME_BASED" | "INVENTORY_BASED" | "DEMAND_BASED" | "CUSTOM"'.

[7m355[0m       return await prisma.pricingRule.findUnique({
[7m   [0m [91m      ~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/routes/v1/upiPayment.routes.ts
ERROR: [96msrc/routes/v1/upiPayment.routes.ts[0m:[93m13[0m:[93m14[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ body: Joi.ObjectSchema<any>; }' is not assignable to parameter of type 'ZodType<any, ZodTypeDef, any>'.
  Type '{ body: ObjectSchema<any>; }' is missing the following properties from type 'ZodType<any, ZodTypeDef, any>': _type, _output, _input, _def, and 34 more.

[7m13[0m     validate(upiPaymentValidation.initiatePayment),
[7m  [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96msrc/routes/v1/upiPayment.routes.ts[0m:[93m21[0m:[93m14[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ params: Joi.ObjectSchema<any>; }' is not assignable to parameter of type 'ZodType<any, ZodTypeDef, any>'.
  Type '{ params: ObjectSchema<any>; }' is missing the following properties from type 'ZodType<any, ZodTypeDef, any>': _type, _output, _input, _def, and 34 more.

[7m21[0m     validate(upiPaymentValidation.getPaymentStatus, 'params'),
[7m  [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96msrc/routes/v1/upiPayment.routes.ts[0m:[93m29[0m:[93m14[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ body: Joi.ObjectSchema<any>; }' is not assignable to parameter of type 'ZodType<any, ZodTypeDef, any>'.
  Type '{ body: ObjectSchema<any>; }' is missing the following properties from type 'ZodType<any, ZodTypeDef, any>': _type, _output, _input, _def, and 34 more.

[7m29[0m     validate(upiPaymentValidation.confirmPayment),
[7m  [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/email.service.ts
ERROR: [96msrc/services/email.service.ts[0m:[93m1[0m:[93m24[0m - [91merror[0m[90m TS7016: [0mCould not find a declaration file for module 'nodemailer'. '/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/node_modules/nodemailer/lib/nodemailer.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/nodemailer` if it exists or add a new declaration (.d.ts) file containing `declare module 'nodemailer';`

[7m1[0m import nodemailer from 'nodemailer';
[7m [0m [91m                       ~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/auth.service.ts
ERROR: [96msrc/services/auth.service.ts[0m:[93m2[0m:[93m71[0m - [91merror[0m[90m TS2307: [0mCannot find module '@/services/api/authApi' or its corresponding type declarations.

[7m2[0m import { login, register, logout, getCurrentUser, refreshToken } from '@/services/api/authApi';
[7m [0m [91m                                                                      ~~~~~~~~~~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/routes/seatLocking.routes.ts
ERROR: [96msrc/routes/seatLocking.routes.ts[0m:[93m138[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'checkSeatsLocked' does not exist on type 'typeof import("/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/seatLocking.controller")'.

[7m138[0m   SeatLockingController.checkSeatsLocked
[7m   [0m [91m                        ~~~~~~~~~~~~~~~~[0m
[96msrc/routes/seatLocking.routes.ts[0m:[93m184[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'extendLock' does not exist on type 'typeof import("/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/seatLocking.controller")'.

[7m184[0m   SeatLockingController.extendLock
[7m   [0m [91m                        ~~~~~~~~~~[0m
[96msrc/routes/seatLocking.routes.ts[0m:[93m231[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'confirmSeats' does not exist on type 'typeof import("/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/seatLocking.controller")'.

[7m231[0m   SeatLockingController.confirmSeats
[7m   [0m [91m                        ~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/routes/user.routes.ts
ERROR: [96msrc/routes/user.routes.ts[0m:[93m21[0m:[93m56[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m21[0m   (req, res, next) => UserController.getProfile(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                       ~~~~~~~~~~~~~~~[0m
[96msrc/routes/user.routes.ts[0m:[93m33[0m:[93m59[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m33[0m   (req, res, next) => UserController.updateProfile(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                          ~~~~~~~~~~~~~~~[0m
[96msrc/routes/user.routes.ts[0m:[93m48[0m:[93m57[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m48[0m   (req, res, next) => UserController.getAllUsers(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                        ~~~~~~~~~~~~~~~[0m
[96msrc/routes/user.routes.ts[0m:[93m59[0m:[93m57[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m59[0m   (req, res, next) => UserController.getUserById(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                        ~~~~~~~~~~~~~~~[0m
[96msrc/routes/user.routes.ts[0m:[93m70[0m:[93m56[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m70[0m   (req, res, next) => UserController.updateUser(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                       ~~~~~~~~~~~~~~~[0m
[96msrc/routes/user.routes.ts[0m:[93m81[0m:[93m56[0m - [91merror[0m[90m TS2304: [0mCannot find name 'DatabaseRequest'.

[7m81[0m   (req, res, next) => UserController.deleteUser(req as DatabaseRequest, res, next)
[7m  [0m [91m                                                       ~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/ticketInvalidation.service.ts
ERROR: [96msrc/services/ticketInvalidation.service.ts[0m:[93m37[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'ticketScans' does not exist in type 'TicketInclude<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }>'.

[7m37[0m           ticketScans: true
[7m  [0m [91m          ~~~~~~~~~~~[0m

  [96mnode_modules/.prisma/client/index.d.ts[0m:[93m28349[0m:[93m5[0m
    [7m28349[0m     include?: TicketInclude<ExtArgs> | null
    [7m     [0m [96m    ~~~~~~~[0m
    The expected type comes from property 'include' which is declared here on type 'TicketFindUniqueArgs<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }>'
[96msrc/services/ticketInvalidation.service.ts[0m:[93m72[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'never'.

[7m72[0m       const entryCount = existingScans.length;
[7m  [0m [91m                                       ~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m75[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketType' does not exist on type '{ booking: { id: string; status: BookingStatus; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; seats: JsonValue; ... 5 more ...; paymentSessionId: string | null; }; ticketScans: never; } & { ...; }'.

[7m75[0m       const ticketType = ticket.ticketType || '';
[7m  [0m [91m                                ~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m80[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'sort' does not exist on type 'never'.

[7m80[0m         const lastScan = existingScans.sort((a, b) =>
[7m  [0m [91m                                       ~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m80[0m:[93m46[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

[7m80[0m         const lastScan = existingScans.sort((a, b) =>
[7m  [0m [91m                                             ~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m80[0m:[93m49[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

[7m80[0m         const lastScan = existingScans.sort((a, b) =>
[7m  [0m [91m                                                ~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m100[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketScan' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m100[0m       await prisma.ticketScan.create({
[7m   [0m [91m                   ~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m117[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'lastScannedAt' does not exist in type 'Exact<(Without<TicketUpdateInput, TicketUncheckedUpdateInput> & TicketUncheckedUpdateInput) | (Without<...> & TicketUpdateInput), (Without<...> & TicketUncheckedUpdateInput) | (Without<...> & TicketUpdateInput)>'.

[7m117[0m           lastScannedAt: now
[7m   [0m [91m          ~~~~~~~~~~~~~[0m

  [96mnode_modules/.prisma/client/index.d.ts[0m:[93m28576[0m:[93m5[0m
    [7m28576[0m     data: XOR<TicketUpdateInput, TicketUncheckedUpdateInput>
    [7m     [0m [96m    ~~~~[0m
    The expected type comes from property 'data' which is declared here on type '{ select?: Exact<TicketSelect<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }> | null | undefined, TicketSelect<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }> | null | undefined>; include?: Exact<...>; data: Exact<...>; where: Exact<...>; }'
[96msrc/services/ticketInvalidation.service.ts[0m:[93m145[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketScan' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m145[0m       await prisma.ticketScan.create({
[7m   [0m [91m                   ~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m170[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketScan' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m170[0m       const scans = await prisma.ticketScan.findMany({
[7m   [0m [91m                                 ~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m222[0m:[93m15[0m - [91merror[0m[90m TS2322: [0mType 'string' is not assignable to type '"CANCELLED" | "PENDING" | "REFUNDED" | "ACTIVE" | "USED" | "EXPIRED" | EnumTicketStatusFieldUpdateOperationsInput | { set?: Exact<TicketStatus | undefined, TicketStatus | undefined>; } | undefined'.

[7m222[0m       data: { status: newStatus }
[7m   [0m [91m              ~~~~~~[0m

  [96mnode_modules/.prisma/client/index.d.ts[0m:[93m34796[0m:[93m5[0m
    [7m34796[0m     status?: EnumTicketStatusFieldUpdateOperationsInput | $Enums.TicketStatus
    [7m     [0m [96m    ~~~~~~[0m
    The expected type comes from property 'status' which is declared here on type 'Exact<(Without<TicketUpdateInput, TicketUncheckedUpdateInput> & TicketUncheckedUpdateInput) | (Without<...> & TicketUpdateInput), (Without<...> & TicketUncheckedUpdateInput) | (Without<...> & TicketUpdateInput)>'
[96msrc/services/ticketInvalidation.service.ts[0m:[93m226[0m:[93m18[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketStatusLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m226[0m     await prisma.ticketStatusLog.create({
[7m   [0m [91m                 ~~~~~~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m266[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'ticketScan' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m266[0m     const scans = await prisma.ticketScan.findMany({
[7m   [0m [91m                               ~~~~~~~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m271[0m:[93m52[0m - [91merror[0m[90m TS7006: [0mParameter 'scan' implicitly has an 'any' type.

[7m271[0m     const scannedTicketIds = [...new Set(scans.map(scan => scan.ticketId))];
[7m   [0m [91m                                                   ~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m275[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'scan' implicitly has an 'any' type.

[7m275[0m     scans.forEach(scan => {
[7m   [0m [91m                  ~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m298[0m:[93m32[0m - [91merror[0m[90m TS7006: [0mParameter 'scan' implicitly has an 'any' type.

[7m298[0m       validScans: scans.filter(scan => scan.status === 'VALID').length,
[7m   [0m [91m                               ~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m299[0m:[93m34[0m - [91merror[0m[90m TS7006: [0mParameter 'scan' implicitly has an 'any' type.

[7m299[0m       invalidScans: scans.filter(scan => scan.status === 'INVALID').length,
[7m   [0m [91m                                 ~~~~[0m
[96msrc/services/ticketInvalidation.service.ts[0m:[93m300[0m:[93m39[0m - [91merror[0m[90m TS7006: [0mParameter 'scan' implicitly has an 'any' type.

[7m300[0m       duplicateAttempts: scans.filter(scan => scan.invalidReason === 'ALREADY_SCANNED').length,
[7m   [0m [91m                                      ~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/routes/v1/payment.routes.ts
ERROR: [96msrc/routes/v1/payment.routes.ts[0m:[93m97[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpiSettings' does not exist on type '{ createUTRPayment(data: { booking_id: string; amount: number; utr_number: string; status: string; payment_date?: Date | undefined; }): Promise<{ id: string; createdAt: Date; updatedAt: Date; ... 5 more ...; verifiedBy: string | null; }>; createPayment(data: Omit_2<...>): Promise<...>; getPaymentByBookingId(bookingI...'.

[7m97[0m     const settings = await paymentService.getUpiSettings();
[7m  [0m [91m                                          ~~~~~~~~~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m128[0m:[93m30[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to parameter of type 'number'.

[7m128[0m     ApiResponse.success(res, verification, 'Payment verified successfully');
[7m   [0m [91m                             ~~~~~~~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m144[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'getPaymentStatus' does not exist on type 'typeof import("/Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/payment.controller")'.

[7m144[0m     paymentController.getPaymentStatus
[7m   [0m [91m                      ~~~~~~~~~~~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m159[0m:[93m50[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: string; createdAt: Date; updatedAt: Date; status: PaymentStatus; bookingId: string; amount: Decimal; method: string | null; }' is not assignable to parameter of type 'number'.

[7m159[0m         .then(result => ApiResponse.success(res, result, 'UPI payment recorded successfully'))
[7m   [0m [91m                                                 ~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m173[0m:[93m34[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: string; createdAt: Date; updatedAt: Date; status: string; bookingId: string; amount: Decimal; utrNumber: string | null; paymentDate: Date | null; verifiedBy: string | null; }' is not assignable to parameter of type 'number'.

[7m173[0m         ApiResponse.success(res, result, 'UPI payment verified successfully');
[7m   [0m [91m                                 ~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m199[0m:[93m39[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ upivpa: any; id: any; }' is not assignable to parameter of type 'number'.

[7m199[0m       return ApiResponse.success(res, {
[7m   [0m [91m                                      ~[0m
[7m200[0m         upivpa: activeSetting.upivpa,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m201[0m         id: activeSetting.id
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m202[0m       }, 'Active UPI setting retrieved');
[7m   [0m [91m~~~~~~~[0m
[96msrc/routes/v1/payment.routes.ts[0m:[93m213[0m:[93m39[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: string; upivpa: string; discountamount: number; isactive: boolean; }' is not assignable to parameter of type 'number'.

[7m213[0m       return ApiResponse.success(res, defaultSetting, 'Using default UPI setting');
[7m   [0m [91m                                      ~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/services/paymentReconciliation.service.ts
ERROR: [96msrc/services/paymentReconciliation.service.ts[0m:[93m48[0m:[93m15[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'transactionId' does not exist in type 'BookingPaymentWhereInput'.

[7m48[0m             { transactionId: transactionData.transactionId }
[7m  [0m [91m              ~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m68[0m:[93m41[0m - [91merror[0m[90m TS2362: [0mThe left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.

[7m68[0m       const amountDifference = Math.abs(payment.amount - transactionData.amount);
[7m  [0m [91m                                        ~~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m76[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'Decimal' is not assignable to type 'number'.

[7m76[0m           expectedAmount: payment.amount,
[7m  [0m [91m          ~~~~~~~~~~~~~~[0m

  [96msrc/services/paymentReconciliation.service.ts[0m:[93m149[0m:[93m5[0m
    [7m149[0m     expectedAmount: number;
    [7m   [0m [96m    ~~~~~~~~~~~~~~[0m
    The expected type comes from property 'expectedAmount' which is declared here on type '{ paymentId: string; bookingId: string; issue: string; expectedAmount: number; receivedAmount: number; transactionId: string; }'
[96msrc/services/paymentReconciliation.service.ts[0m:[93m94[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'transactionId' does not exist in type '(Without<BookingPaymentUpdateInput, BookingPaymentUncheckedUpdateInput> & BookingPaymentUncheckedUpdateInput) | (Without<...> & BookingPaymentUpdateInput)'.

[7m94[0m           transactionId: transactionData.transactionId,
[7m  [0m [91m          ~~~~~~~~~~~~~[0m

  [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11058[0m:[93m5[0m
    [7m11058[0m     data: XOR<BookingPaymentUpdateInput, BookingPaymentUncheckedUpdateInput>
    [7m     [0m [96m    ~~~~[0m
    The expected type comes from property 'data' which is declared here on type 'BookingPaymentUpdateArgs<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }>'
[96msrc/services/paymentReconciliation.service.ts[0m:[93m125[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'reconciliationLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m125[0m       await prisma.reconciliationLog.create({
[7m   [0m [91m                   ~~~~~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m154[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'reconciliationLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m154[0m       await prisma.reconciliationLog.create({
[7m   [0m [91m                   ~~~~~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m193[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'reconciliationLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m193[0m       prisma.reconciliationLog.findMany({
[7m   [0m [91m             ~~~~~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m199[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'reconciliationLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m199[0m       prisma.reconciliationLog.count({ where })
[7m   [0m [91m             ~~~~~~~~~~~~~~~~~[0m
[96msrc/services/paymentReconciliation.service.ts[0m:[93m220[0m:[93m19[0m - [91merror[0m[90m TS2339: [0mProperty 'reconciliationLog' does not exist on type 'DynamicClientExtensionThis<TypeMap<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }, PrismaClientOptions>, TypeMapCb, { result: {}; model: {}; query: {}; client: {}; }, {}>'.

[7m220[0m     return prisma.reconciliationLog.update({
[7m   [0m [91m                  ~~~~~~~~~~~~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/lavkushkumar/Desktop/BPL1/eventia-backend-express/src/controllers/v1/booking.controller.ts
ERROR: [96msrc/controllers/v1/booking.controller.ts[0m:[93m92[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'ticketNumber' does not exist in type '(Without<TicketCreateInput, TicketUncheckedCreateInput> & TicketUncheckedCreateInput) | { ...; }'.

[7m92[0m             ticketNumber: `TKT-${Math.floor(Math.random() * 1000000)}`,
[7m  [0m [91m            ~~~~~~~~~~~~[0m

  [96mnode_modules/.prisma/client/index.d.ts[0m:[93m28528[0m:[93m5[0m
    [7m28528[0m     data: XOR<TicketCreateInput, TicketUncheckedCreateInput>
    [7m     [0m [96m    ~~~~[0m
    The expected type comes from property 'data' which is declared here on type '{ select?: Exact<TicketSelect<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }> | null | undefined, TicketSelect<InternalArgs & { result: {}; model: {}; query: {}; client: {}; }> | null | undefined>; include?: Exact<...>; data: Exact<...>; }'
[96msrc/controllers/v1/booking.controller.ts[0m:[93m188[0m:[93m37[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ bookings: { tickets: ({ seat: { meta: JsonValue | null; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; status: $Enums.SeatStatus; ... 8 more ...; paymentIntentId: string | null; } | null; } & { ...; })[]; ... 14 more ...; paymentSessionId: string | null; }[]; pagination: ...' is not assignable to parameter of type 'number'.

[7m188[0m     return ApiResponse.success(res, {
[7m   [0m [91m                                    ~[0m
[7m189[0m       bookings: bookingsWithTickets,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m195[0m       }
[7m   [0m [91m~~~~~~~[0m
[7m196[0m     }, 'User bookings fetched successfully');
[7m   [0m [91m~~~~~[0m
[96msrc/controllers/v1/booking.controller.ts[0m:[93m221[0m:[93m37[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ tickets: ({ seat: { meta: JsonValue | null; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; status: $Enums.SeatStatus; ... 8 more ...; paymentIntentId: string | null; } | null; } & { ...; })[]; ... 15 more ...; paymentSessionId: string | null; }' is not assignable to parameter of type 'number'.

[7m221[0m     return ApiResponse.success(res, booking, 'Booking fetched successfully');
[7m   [0m [91m                                    ~~~~~~~[0m
[96msrc/controllers/v1/booking.controller.ts[0m:[93m292[0m:[93m37[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: string; }' is not assignable to parameter of type 'number'.

[7m292[0m     return ApiResponse.success(res, { id }, 'Booking cancelled successfully');
[7m   [0m [91m                                    ~~~~~~[0m
[96msrc/controllers/v1/booking.controller.ts[0m:[93m355[0m:[93m37[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ bookings: ({ event: { id: string; title: string; startDate: Date; }; user: { id: string; email: string; name: string; }; payment: { id: string; createdAt: Date; updatedAt: Date; status: $Enums.PaymentStatus; bookingId: string; amount: Decimal; method: string | null; } | null; } & { ...; })[]; pagination: { ...; }; }' is not assignable to parameter of type 'number'.

[7m355[0m     return ApiResponse.success(res, {
[7m   [0m [91m                                    ~[0m
[7m356[0m       bookings,
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m362[0m       }
[7m   [0m [91m~~~~~~~[0m
[7m363[0m     }, 'Bookings fetched successfully');
[7m   [0m [91m~~~~~[0m
[96msrc/controllers/v1/booking.controller.ts[0m:[93m466[0m:[93m37[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ tickets: ({ seat: { meta: JsonValue; id: string; isDeleted: boolean; deletedAt: Date | null; createdAt: Date; updatedAt: Date; status: SeatStatus; ... 8 more ...; paymentIntentId: string | null; } | null; } & { ...; })[]; ... 15 more ...; paymentSessionId: string | null; } | null' is not assignable to parameter of type 'number | undefined'.
  Type 'null' is not assignable to type 'number | undefined'.

[7m466[0m     return ApiResponse.success(res, updatedBooking, 'Booking status updated successfully');
[7m   [0m [91m                                    ~~~~~~~~~~~~~~[0m
STACK: 
----------------------------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------
File                                                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                              
----------------------------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------
All files                                           |   21.32 |     5.72 |    7.17 |      21 |                                                                                                                
 src                                                |   86.88 |    30.76 |   71.42 |   86.44 |                                                                                                                
  app.ts                                            |   86.88 |    30.76 |   71.42 |   86.44 | 76-79,92-95,117,127                                                                                            
 src/controllers                                    |   12.61 |        0 |       0 |    12.5 |                                                                                                                
  authController.ts                                 |   18.57 |        0 |       0 |   18.57 | 15-38,45-94,106-171,186-190,199-213                                                                            
  booking.controller.ts                             |   15.21 |        0 |       0 |   15.38 | 21-107,114-135,142-193,200-222,229-325                                                                         
  dashboard.controller.ts                           |       0 |        0 |       0 |       0 | 2-125                                                                                                          
  discount.controller.ts                            |   16.66 |        0 |       0 |   16.86 | 16-20,29-41,50-60,69-97,106-111,120-125,134-158,167-194,203-218                                                
  event.controller.ts                               |   16.06 |        0 |       0 |   17.31 | 28-34,50-69,78-104,112-140,148-168,177-196,212-218,227-289,300-355,367-414,423-439,447-504,518-620             
  metricsController.ts                              |    6.97 |        0 |       0 |    6.97 | 14-164                                                                                                         
  payment.controller.ts                             |   12.95 |        0 |       0 |    12.7 | 30-107,116-141,150-180,189-201,209-226,234-304,313-419,428-488,497-557,571-615,624-647,657-719,727-728,736-802 
  public.controller.ts                              |   24.24 |        0 |       0 |   24.24 | 16-37,45-105                                                                                                   
  reservationController.ts                          |   18.68 |        0 |       0 |   14.45 | 14,19-45,50-68,77,81-118,126-161,169-198                                                                       
  seat.controller.ts                                |    9.25 |        0 |       0 |    9.25 | 21-361                                                                                                         
  seatLocking.controller.ts                         |       0 |        0 |       0 |       0 | 2-234                                                                                                          
  stateSync.controller.ts                           |   13.79 |        0 |       0 |   13.79 | 16-97                                                                                                          
  stripe.controller.ts                              |   10.14 |        0 |       0 |   10.14 | 16-206                                                                                                         
  ticket.controller.ts                              |    6.14 |        0 |       0 |    6.14 | 20-338                                                                                                         
  ticketCategory.controller.ts                      |   26.53 |        0 |       0 |   26.53 | 13-35,42-48,55-65,72-94,101-116,123-146                                                                        
  upiPayment.controller.ts                          |       0 |        0 |       0 |       0 | 1-434                                                                                                          
  upiSettings.controller.ts                         |   26.47 |        0 |       0 |   26.47 | 11-15,25-42,52-74,84-112,122-128                                                                               
  user.controller.ts                                |   22.91 |        0 |       0 |   22.91 | 12-36,50-68,75-101,108-118,125-147,154-177                                                                     
 src/controllers/admin                              |    8.45 |        0 |       0 |    8.94 |                                                                                                                
  event.controller.ts                               |       0 |        0 |       0 |       0 | 2-255                                                                                                          
  upiSettings.controller.ts                         |    12.5 |        0 |       0 |   12.97 | 37-50,58-85,95-156,167-255,268-323,332-386                                                                     
 src/controllers/v1                                 |   21.68 |     7.79 |    7.69 |   21.68 |                                                                                                                
  event.controller.ts                               |   30.37 |       15 |   16.66 |   30.37 | 44-45,53,58,89-112,120-165,182-214,221-263,275-294,306-332                                                     
  user.controller.ts                                |   13.79 |        0 |       0 |   13.79 | 18-47,54-150,157-184,192-240,248-273,281-326,334-354                                                           
 src/db                                             |    24.2 |    11.76 |    4.54 |   21.85 |                                                                                                                
  index.ts                                          |   31.25 |     12.5 |       0 |   27.27 | 42-46,69-95,104-110,118-124                                                                                    
  prisma.ts                                         |    21.1 |    11.66 |    6.66 |   19.62 | 16-24,49,64-73,82-83,89-101,106-118,126-214,225-232,240-244                                                    
 src/db/migrations                                  |       0 |      100 |       0 |       0 |                                                                                                                
  20230501000001_initial_schema.ts                  |       0 |      100 |       0 |       0 | 4-168                                                                                                          
  20240426000004_payment_tables.ts                  |       0 |      100 |       0 |       0 | 4-36                                                                                                           
 src/examples                                       |       0 |        0 |       0 |       0 |                                                                                                                
  optimized-controller.example.ts                   |       0 |        0 |       0 |       0 | 2-160                                                                                                          
 src/middleware                                     |   36.65 |     19.6 |   33.96 |    34.3 |                                                                                                                
  auth.ts                                           |   55.68 |    42.85 |   54.54 |   53.08 | 48,56,60-61,79-80,87-100,110,121-122,128-134,147-164,179-189                                                   
  cache.ts                                          |   18.75 |        0 |      25 |   15.21 | 25-112,122-127                                                                                                 
  csrf.ts                                           |   28.94 |        0 |       0 |      25 | 22-40,48-87                                                                                                    
  database.ts                                       |      50 |      100 |       0 |   42.85 | 20-25                                                                                                          
  dataloader.middleware.ts                          |     100 |      100 |     100 |     100 |                                                                                                                
  errorBoundary.ts                                  |       0 |        0 |       0 |       0 | 2-132                                                                                                          
  errorHandler.ts                                   |    40.9 |    29.41 |     100 |   38.09 | 39-111                                                                                                         
  index.ts                                          |       0 |        0 |       0 |       0 | 2-47                                                                                                           
  rateLimit.ts                                      |       0 |        0 |       0 |       0 | 1-130                                                                                                          
  upload.ts                                         |   52.63 |        0 |   28.57 |   51.35 | 13,19,29-36,43-54,91-106                                                                                       
  validate.ts                                       |   67.21 |    41.66 |      60 |   67.92 | 28-29,51,62-71,92-97,111,121-125,133-134                                                                       
 src/migrations                                     |       0 |      100 |       0 |       0 |                                                                                                                
  20240615000000_create_bookings.ts                 |       0 |      100 |       0 |       0 | 3-16                                                                                                           
  20240615000001_create_booking_payments.ts         |       0 |      100 |       0 |       0 | 3-17                                                                                                           
  20240625000000_create_reservation_expiry_queue.ts |       0 |      100 |       0 |       0 | 6-25                                                                                                           
  20240626000000_create_ticket_generation_queue.ts  |       0 |      100 |       0 |       0 | 6-28                                                                                                           
 src/models                                         |   28.26 |    10.81 |    5.55 |   29.32 |                                                                                                                
  booking.ts                                        |       0 |        0 |       0 |       0 | 2-196                                                                                                          
  index.ts                                          |       0 |      100 |     100 |       0 | 3-9                                                                                                            
  payment.ts                                        |   17.64 |        0 |       0 |   18.18 | 55-161,173-235                                                                                                 
  seat.ts                                           |   31.57 |       20 |      10 |   31.57 | 83-235                                                                                                         
  seatLock.ts                                       |     100 |      100 |     100 |     100 |                                                                                                                
  user.ts                                           |   61.11 |        0 |       0 |   61.11 | 41-68                                                                                                          
 src/repositories                                   |   17.79 |    16.81 |   17.24 |   18.34 |                                                                                                                
  discountRepository.ts                             |       0 |        0 |       0 |       0 | 2-314                                                                                                          
  event.repository.ts                               |   30.88 |    28.35 |   41.66 |    32.3 | 57,68-70,93,113-271,286-293,304,316-320,328,332-333,343,352,357,384-396                                        
  userRepository.ts                                 |       0 |        0 |       0 |       0 | 1-123                                                                                                          
 src/routes                                         |   68.22 |        0 |       0 |   68.42 |                                                                                                                
  admin.routes.ts                                   |       0 |      100 |       0 |       0 | 1-266                                                                                                          
  auth.ts                                           |     100 |      100 |     100 |     100 |                                                                                                                
  booking.routes.ts                                 |     100 |      100 |     100 |     100 |                                                                                                                
  discount.routes.ts                                |     100 |      100 |     100 |     100 |                                                                                                                
  event.routes.ts                                   |   86.36 |        0 |       0 |   86.36 | 188-191                                                                                                        
  events.routes.ts                                  |       0 |      100 |     100 |       0 | 1-12                                                                                                           
  health.routes.ts                                  |    25.8 |        0 |       0 |   26.66 | 83-130,158-178                                                                                                 
  healthRoutes.ts                                   |       0 |      100 |       0 |       0 | 1-7                                                                                                            
  index.ts                                          |   93.75 |      100 |       0 |   93.75 | 22,32                                                                                                          
  metricsRoutes.ts                                  |     100 |      100 |     100 |     100 |                                                                                                                
  payment.initialize.routes.ts                      |     100 |      100 |     100 |     100 |                                                                                                                
  payment.routes.ts                                 |     100 |      100 |     100 |     100 |                                                                                                                
  reservation.routes.ts                             |      60 |      100 |       0 |      60 | 13-18,24                                                                                                       
  reservationRoutes.ts                              |       0 |      100 |     100 |       0 | 1-23                                                                                                           
  seat.lock.routes.ts                               |     100 |      100 |     100 |     100 |                                                                                                                
  seat.routes.ts                                    |     100 |      100 |     100 |     100 |                                                                                                                
  stateSync.routes.ts                               |     100 |      100 |     100 |     100 |                                                                                                                
  stripe.routes.ts                                  |     100 |      100 |     100 |     100 |                                                                                                                
  ticket.routes.ts                                  |   65.51 |      100 |       0 |   65.51 | 115,142,171,209,257,293,332,359,387,415                                                                        
  ticketCategory.routes.ts                          |     100 |      100 |     100 |     100 |                                                                                                                
  upiSettings.routes.ts                             |     100 |      100 |     100 |     100 |                                                                                                                
  utrVerification.routes.ts                         |   61.11 |        0 |       0 |   61.11 | 18-51,57                                                                                                       
 src/routes/admin                                   |       0 |      100 |     100 |       0 |                                                                                                                
  events.routes.ts                                  |       0 |      100 |     100 |       0 | 1-28                                                                                                           
 src/routes/v1                                      |   68.57 |      100 |       0 |   68.57 |                                                                                                                
  auth.routes.ts                                    |   72.72 |      100 |       0 |   72.72 | 19,28,35,42,88,95                                                                                              
  dynamicPricing.route.ts                           |       0 |      100 |     100 |       0 | 1-62                                                                                                           
  event.routes.ts                                   |   58.62 |      100 |       0 |   58.62 | 157-171,185-224                                                                                                
  index.ts                                          |     100 |      100 |     100 |     100 |                                                                                                                
  public.routes.ts                                  |       0 |      100 |     100 |       0 | 11-14                                                                                                          
  user.routes.ts                                    |     100 |      100 |     100 |     100 |                                                                                                                
 src/routes/v1/admin                                |   63.15 |        0 |       0 |   63.15 |                                                                                                                
  event.routes.ts                                   |     100 |      100 |     100 |     100 |                                                                                                                
  index.ts                                          |      75 |        0 |       0 |      75 | 25-27,32-33                                                                                                    
  template.routes.ts                                |       0 |      100 |       0 |       0 | 1-72                                                                                                           
  upiSettings.routes.ts                             |   93.33 |      100 |       0 |   93.33 | 31                                                                                                             
  user.routes.ts                                    |      80 |      100 |       0 |      80 | 63,75,88,100                                                                                                   
 src/routes/v1/public                               |   46.42 |        0 |       0 |   46.42 |                                                                                                                
  index.ts                                          |     100 |      100 |     100 |     100 |                                                                                                                
  template.routes.ts                                |       0 |        0 |       0 |       0 | 1-57                                                                                                           
  upi.routes.ts                                     |     100 |      100 |     100 |     100 |                                                                                                                
 src/scripts                                        |       0 |        0 |       0 |       0 |                                                                                                                
  add-ipl-events.ts                                 |       0 |        0 |       0 |       0 | 1-226                                                                                                          
  create-test-user.ts                               |       0 |      100 |       0 |       0 | 1-32                                                                                                           
  fix-ticket-generation-queue.ts                    |       0 |      100 |       0 |       0 | 12-24                                                                                                          
  release-expired-payment-sessions.ts               |       0 |        0 |       0 |       0 | 8-36                                                                                                           
  run-migration.ts                                  |       0 |      100 |       0 |       0 | 8-26                                                                                                           
  seed-events.ts                                    |       0 |        0 |       0 |       0 | 8-208                                                                                                          
  seed-upi-settings.ts                              |       0 |        0 |       0 |       0 | 8-72                                                                                                           
  test-user-profile-api.ts                          |       0 |      100 |       0 |       0 | 7-59                                                                                                           
  test-user-profile.ts                              |       0 |      100 |       0 |       0 | 7-76                                                                                                           
 src/services                                       |    7.31 |     0.75 |    3.22 |    7.15 |                                                                                                                
  authService.ts                                    |       0 |        0 |       0 |       0 | 1-118                                                                                                          
  booking.service.ts                                |   12.69 |        0 |       0 |    9.83 | 38-215,281-294,305-344                                                                                         
  cacheService.ts                                   |       0 |        0 |       0 |       0 | 1-137                                                                                                          
  discount.service.ts                               |    3.09 |        0 |       0 |     3.4 | 10-280                                                                                                         
  dynamicPricing.service.ts                         |       0 |        0 |       0 |       0 | 1-306                                                                                                          
  event.service.ts                                  |   10.65 |        0 |    7.14 |   10.92 | 36,48-475                                                                                                      
  index.ts                                          |       0 |      100 |     100 |       0 | 3-9                                                                                                            
  job.service.ts                                    |       0 |        0 |       0 |       0 | 1-159                                                                                                          
  payment.service.ts                                |    14.7 |        0 |       0 |    14.7 | 19-151                                                                                                         
  reservation.service.ts                            |   10.52 |        0 |       0 |   11.42 | 15-142                                                                                                         
  seat.service.ts                                   |    3.57 |        0 |       0 |    3.65 | 31-716                                                                                                         
  stateSync.service.ts                              |    6.52 |        0 |       0 |    6.74 | 24-315                                                                                                         
  stripe.service.ts                                 |    9.67 |    14.28 |       0 |    9.67 | 20-108                                                                                                         
  team.service.ts                                   |       0 |      100 |       0 |       0 | 2-49                                                                                                           
  ticket.service.ts                                 |     4.8 |        0 |       0 |    4.87 | 22-733                                                                                                         
  transaction.service.ts                            |   22.22 |     5.88 |   28.57 |   23.07 | 50-176                                                                                                         
  upiPayment.service.ts                             |   41.66 |        0 |       0 |      30 | 14-28,39,49-68,80-83                                                                                           
  websocket.service.ts                              |    12.3 |        0 |      10 |   13.91 | 35,46-384,399                                                                                                  
 src/services/api                                   |       0 |        0 |       0 |       0 |                                                                                                                
  apiUtils.ts                                       |       0 |        0 |       0 |       0 | 1-23                                                                                                           
  paymentApi.ts                                     |       0 |      100 |       0 |       0 | 1-69                                                                                                           
 src/utils                                          |   28.47 |    12.72 |   23.68 |   26.68 |                                                                                                                
  apiError.ts                                       |   66.66 |     7.69 |    37.5 |   66.66 | 53-81                                                                                                          
  apiResponse.ts                                    |      30 |    26.66 |   16.66 |      30 | 37-38,66-128                                                                                                   
  asyncHandler.ts                                   |      75 |        0 |     100 |   71.42 | 42-50                                                                                                          
  catchAsync.ts                                     |      75 |      100 |      50 |   66.66 | 5                                                                                                              
  dataloader.ts                                     |   24.39 |        0 |   26.66 |   25.64 | 25-46,60-115                                                                                                   
  date-utils.ts                                     |   36.36 |        0 |       0 |   23.52 | 7-8,21-22,37-39,48-56                                                                                          
  errorCodes.ts                                     |     100 |      100 |     100 |     100 |                                                                                                                
  fileUpload.ts                                     |       0 |        0 |       0 |       0 | 1-146                                                                                                          
  fix-queries.ts                                    |       0 |      100 |       0 |       0 | 1-63                                                                                                           
  fix-ticket-generation-queue.ts                    |       0 |        0 |       0 |       0 | 6-96                                                                                                           
  generateRouteDocs.ts                              |       0 |        0 |       0 |       0 | 1-37                                                                                                           
  index.ts                                          |     100 |      100 |     100 |     100 |                                                                                                                
  jwt.ts                                            |    42.1 |     12.5 |      50 |   37.14 | 16-17,47-80,90-93                                                                                              
  logger.ts                                         |   62.96 |       50 |   28.57 |   62.96 | 8,58,70-71,75-76,80-81,85-86                                                                                   
  pdf-generator.ts                                  |   10.41 |        0 |       0 |    6.52 | 12-73,81-82                                                                                                    
  qrCode.ts                                         |       0 |      100 |       0 |       0 | 1-23                                                                                                           
  retry.ts                                          |   13.04 |        0 |       0 |   13.63 | 36-83                                                                                                          
  routeHelper.ts                                    |   23.91 |     12.5 |   18.18 |    18.6 | 24-56,65-96                                                                                                    
 src/validations                                    |   52.17 |        0 |       0 |      50 |                                                                                                                
  booking.validation.ts                             |     100 |      100 |     100 |     100 |                                                                                                                
  custom.validation.ts                              |      50 |      100 |       0 |   33.33 | 11,20,29-33,43-44,54-55                                                                                        
  discount.validation.ts                            |     100 |      100 |     100 |     100 |                                                                                                                
  dynamicPricing.validation.ts                      |       0 |        0 |       0 |       0 | 1-78                                                                                                           
  event.validation.ts                               |      75 |        0 |       0 |   72.72 | 59-66                                                                                                          
  payment.validation.ts                             |   93.33 |      100 |       0 |   93.33 | 9                                                                                                              
  payment.validations.ts                            |       0 |      100 |     100 |       0 | 1-94                                                                                                           
  seat.validation.ts                                |   88.88 |      100 |       0 |   88.88 | 34                                                                                                             
  seatLocking.validation.ts                         |       0 |      100 |     100 |       0 | 1-44                                                                                                           
  ticket.validation.ts                              |     100 |      100 |     100 |     100 |                                                                                                                
  ticketCategory.validation.ts                      |   64.28 |      100 |       0 |   64.28 | 11,17,30,39,45                                                                                                 
  upiPayment.validations.ts                         |       0 |      100 |     100 |       0 | 1-66                                                                                                           
  user.validation.ts                                |       0 |      100 |     100 |       0 | 1-30                                                                                                           
 src/validators                                     |   25.92 |        0 |       0 |   26.92 |                                                                                                                
  booking.validator.ts                              |       0 |      100 |     100 |       0 | 1-24                                                                                                           
  dynamicPricing.validator.ts                       |       0 |      100 |     100 |       0 | 1-20                                                                                                           
  event.validator.ts                                |      50 |        0 |       0 |   53.84 | 28-31,50-53                                                                                                    
  ticketCategory.validator.ts                       |       0 |      100 |     100 |       0 | 1-18                                                                                                           
----------------------------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------
Test Suites: 1 failed, 1 total
Tests:       1 failed, 3 passed, 4 total
Snapshots:   0 total
Time:        38.28 s
Ran all test suites matching /src\/__tests__\/integration\/eventRoutes.test.ts/i.
